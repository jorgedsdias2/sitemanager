require 'rails_helper'

RSpec.describe SessionsController, type: :controller do
	render_views

	let(:user) { FactoryGirl.create(:user) }
=begin
	describe "GET index" do
		# "when user logged in render index view"
		# "when user not logged in redirect to login_url"
		it "renders the painel layout" do
			get :index
			expect(response).to render_template("painel")
		end

		# "Painel Administrativo"
		# "must contain welcome message"
	end
=end

	describe "GET new" do
		it "should renders the login layout" do
			get :new
			expect(response).to render_template("login")
		end

		it "should must contain my site and title" do
			get :new
			title = assigns(:title)
			expect(response.body).to have_title("My Site | " + title)
		end

		it "should login user with welcome message" do
			visit login_path
			fill_in 'session[email]', with: user.email
			fill_in 'session[password]', with: user.password
			click_button 'Login'

			expect(page).to have_content("Welcome! " + user.name)
		end
	end
end